<!DOCTYPE html>
<html>
<head>
	<title>7=7</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <script src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js" type="text/javascript"></script>
</head>
<body>
	<div id="chart-container">FusionCharts will render here</div>
	<script type="text/javascript">
		FusionCharts.ready(function() {
		  var updateAnnotation,
		    chart = new FusionCharts({
		      type: 'thermometer',
		      renderAt: 'chart-container',
		      id: 'myThm',
		      width: '240',
		      height: '310',
		      dataFormat: 'json',
		      dataSource: {
		        "chart": {
		          "theme": "fusion",
		          "caption": "7=7 Daily Donations",
		          "subcaption": "total donated to date",
		          "lowerLimit": "0",
		          "upperLimit": "10000",

		          "decimals": "0",
		          "numberPrefix": "R",
		          "numberSuffix": "",
		          "showhovereffect": "1",
		          "thmFillColor": "#ff0000",
		          "showGaugeBorder": "1",
		          "gaugeBorderColor": "#ff0000",
		          "gaugeBorderThickness": "2",
		          "gaugeBorderAlpha": "30",
		          "thmOriginX": "100",
		          "chartBottomMargin": "20",
		          "valueFontColor": "#000000"
		        },
		        "value": "950",
		        //All annotations are grouped under this element
		        "annotations": {
		          "showbelow": "0",
		          "groups": [{
		            //Each group needs a unique ID
		            "id": "indicator",
		            "items": [
		              //Showing Annotation
		              {
		                "id": "background",
		                //Rectangle item 
		                "type": "rectangle",
		                "alpha": "50",
		                "fillColor": "#AABBCC",
		                "x": "$gaugeEndX-40",
		                "tox": "$gaugeEndX",
		                "y": "$gaugeEndY+54",
		                "toy": "$gaugeEndY+65"
		              }
		            ]
		          }]

		        },
		      },
		      "events": {
		        "initialized": function(evt, arg) {
		          var dataUpdate = setInterval(function() {
		            var value,
		              prevTemp = FusionCharts.items["myThm"].getData(),
		              mainTemp = (Math.random() * 10) * (-1),
		              diff = Math.abs(prevTemp - mainTemp);

		            diff = diff > 1 ? (Math.random() * 1) : diff;
		            if (mainTemp > prevTemp) {
		              value = prevTemp + diff;
		            } else {
		              value = prevTemp - diff;
		            }

		            FusionCharts.items["myThm"].feedData("&value=" + value);

		          }, 3000);
		          updateAnnotation = function(evtObj, argObj) {
		            var code,
		              chartObj = evtObj.sender,
		              val = chartObj.getData(),
		              annotations = chartObj.annotations;

		            if (val >= 1000) {
		              code = "#00FF00";
		            } else if (val < 1000 && val > 3000) {
		              code = "#ff9900";
		            } else {
		              code = "#ff0000";
		            }
		            annotations.update("background", {
		              "fillColor": code
		            });
		          };
		        },
		        "renderComplete": function(evt, arg) {
		          updateAnnotation(evt, arg);
		        },
		        "realtimeUpdateComplete": function(evt, arg) {
		          updateAnnotation(evt, arg);
		        }
		      }
		    })
		    .render();
		});
	</script>
</body>
</html>